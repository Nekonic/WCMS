# WCMS ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜

> **ìµœì¢… ì—…ë°ì´íŠ¸**: 2025-12-30  
> **ë²„ì „**: 2.0  
> **í”„ë¡œì íŠ¸**: Woosuk Computer Management System

---

## ğŸ“š ëª©ì°¨

1. [ì‹œìŠ¤í…œ ê°œìš”](#ì‹œìŠ¤í…œ-ê°œìš”)
2. [ì•„í‚¤í…ì²˜ ë‹¤ì´ì–´ê·¸ë¨](#ì•„í‚¤í…ì²˜-ë‹¤ì´ì–´ê·¸ë¨)
3. [ì»´í¬ë„ŒíŠ¸ êµ¬ì¡°](#ì»´í¬ë„ŒíŠ¸-êµ¬ì¡°)
4. [ë°ì´í„° íë¦„](#ë°ì´í„°-íë¦„)
5. [ë°ì´í„°ë² ì´ìŠ¤ ì„¤ê³„](#ë°ì´í„°ë² ì´ìŠ¤-ì„¤ê³„)
6. [ë³´ì•ˆ ì•„í‚¤í…ì²˜](#ë³´ì•ˆ-ì•„í‚¤í…ì²˜)
7. [í™•ì¥ì„± ê³ ë ¤ì‚¬í•­](#í™•ì¥ì„±-ê³ ë ¤ì‚¬í•­)

---

## ì‹œìŠ¤í…œ ê°œìš”

WCMSëŠ” **Client-Server ì•„í‚¤í…ì²˜**ë¥¼ ê¸°ë°˜ìœ¼ë¡œ í•œ ì‹¤ìŠµì‹¤ PC ì›ê²© ê´€ë¦¬ ì‹œìŠ¤í…œì…ë‹ˆë‹¤.

### í•µì‹¬ íŠ¹ì§•
- **ì¤‘ì•™ ì§‘ì¤‘ì‹ ê´€ë¦¬**: ë‹¨ì¼ Flask ì„œë²„ê°€ ëª¨ë“  í´ë¼ì´ì–¸íŠ¸ ê´€ë¦¬
- **Long-polling í†µì‹ **: í´ë¼ì´ì–¸íŠ¸ê°€ 10ì´ˆë§ˆë‹¤ ëª…ë ¹ í™•ì¸
- **SQLite ë°ì´í„°ë² ì´ìŠ¤**: ê²½ëŸ‰ ë°ì´í„°ë² ì´ìŠ¤ë¡œ ë¹ ë¥¸ ë°°í¬
- **Windows ì„œë¹„ìŠ¤**: ë°±ê·¸ë¼ìš´ë“œ ìƒì£¼ í”„ë¡œê·¸ë¨

### ê¸°ìˆ  ìŠ¤íƒ

| ê³„ì¸µ | ê¸°ìˆ  |
|------|------|
| **í”„ë¡ íŠ¸ì—”ë“œ** | HTML5, CSS3, Vanilla JavaScript |
| **ë°±ì—”ë“œ** | Flask 2.x, Python 3.8+ |
| **ë°ì´í„°ë² ì´ìŠ¤** | SQLite 3 (WAL ëª¨ë“œ) |
| **í´ë¼ì´ì–¸íŠ¸** | Python 3.8+, psutil, WMI, pywin32 |
| **í†µì‹ ** | REST API, JSON, Long-polling |
| **ë°°í¬** | PyInstaller (í´ë¼ì´ì–¸íŠ¸), systemd (ì„œë²„) |

---

## ì•„í‚¤í…ì²˜ ë‹¤ì´ì–´ê·¸ë¨

### ì „ì²´ ì‹œìŠ¤í…œ êµ¬ì¡°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         ê´€ë¦¬ì                               â”‚
â”‚                     (ì›¹ ë¸Œë¼ìš°ì €)                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚ HTTPS/HTTP
                       â”‚ (ì„¸ì…˜ ê¸°ë°˜ ì¸ì¦)
                       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     Flask ì„œë²„                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚  Web Routes â”‚  â”‚  Admin API   â”‚  â”‚  Client API  â”‚      â”‚
â”‚  â”‚  (HTML)     â”‚  â”‚  (ê´€ë¦¬ ëª…ë ¹) â”‚  â”‚  (ë“±ë¡/í•˜íŠ¸ë¹„íŠ¸)â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚         â”‚                â”‚                  â”‚               â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚
â”‚                          â†“                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚           ì„œë¹„ìŠ¤ ë ˆì´ì–´                        â”‚         â”‚
â”‚  â”‚  - PC ê´€ë¦¬   - ëª…ë ¹ ì²˜ë¦¬   - ì¸ì¦/ê¶Œí•œ       â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚                        â†“                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚           ëª¨ë¸ ë ˆì´ì–´                          â”‚         â”‚
â”‚  â”‚  - PC Model  - Command Model  - Admin Model  â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚                        â†“                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚         SQLite Database (WAL ëª¨ë“œ)            â”‚         â”‚
â”‚  â”‚  - pc_info  - pc_status  - pc_command         â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚       ë°±ê·¸ë¼ìš´ë“œ ì›Œì»¤ (ìŠ¤ë ˆë“œ)                 â”‚         â”‚
â”‚  â”‚  - ì˜¤í”„ë¼ì¸ ì²´í¬ (30ì´ˆ)                       â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                      â”‚ REST API
                      â”‚ (Long-polling)
                      â†“
     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     â†“                                 â†“                 â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Client 1 â”‚                     â”‚ Client 2 â”‚ ...  â”‚ Client N â”‚
â”‚ (Windows)â”‚                     â”‚ (Windows)â”‚      â”‚ (Windows)â”‚
â”‚          â”‚                     â”‚          â”‚      â”‚          â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â” â”‚                     â”‚ â”Œâ”€â”€â”€â”€â”€â”€â” â”‚      â”‚ â”Œâ”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚Collectâ”‚â”‚                     â”‚ â”‚Collectâ”‚â”‚      â”‚ â”‚Collectâ”‚â”‚
â”‚ â”‚or    â”‚â”‚                     â”‚ â”‚or    â”‚â”‚      â”‚ â”‚or    â”‚â”‚
â”‚ â””â”€â”€â”¬â”€â”€â”€â”˜ â”‚                     â”‚ â””â”€â”€â”¬â”€â”€â”€â”˜ â”‚      â”‚ â””â”€â”€â”¬â”€â”€â”€â”˜ â”‚
â”‚    â”‚     â”‚                     â”‚    â”‚     â”‚      â”‚    â”‚     â”‚
â”‚ â”Œâ”€â”€â–¼â”€â”€â”€â” â”‚                     â”‚ â”Œâ”€â”€â–¼â”€â”€â”€â” â”‚      â”‚ â”Œâ”€â”€â–¼â”€â”€â”€â” â”‚
â”‚ â”‚Executâ”‚â”‚                     â”‚ â”‚Executâ”‚â”‚      â”‚ â”‚Executâ”‚â”‚
â”‚ â”‚or    â”‚â”‚                     â”‚ â”‚or    â”‚â”‚      â”‚ â”‚or    â”‚â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”˜ â”‚                     â”‚ â””â”€â”€â”€â”€â”€â”€â”˜ â”‚      â”‚ â””â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚          â”‚                     â”‚          â”‚      â”‚          â”‚
â”‚ Windows  â”‚                     â”‚ Windows  â”‚      â”‚ Windows  â”‚
â”‚ Service  â”‚                     â”‚ Service  â”‚      â”‚ Service  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### í†µì‹  íë¦„

#### 1. í´ë¼ì´ì–¸íŠ¸ ë“±ë¡ (ì´ˆê¸° 1íšŒ)
```
Client                    Server
  â”‚                         â”‚
  â”‚â”€â”€â”€register (POST)â”€â”€â”€â”€â”€â”€>â”‚
  â”‚  {machine_id, specs...} â”‚
  â”‚                         â”‚â”€â”€> DB: INSERT pc_info
  â”‚                         â”‚â”€â”€> DB: INSERT pc_specs
  â”‚<â”€â”€{status: success}â”€â”€â”€â”€â”€â”‚
  â”‚                         â”‚
```

#### 2. í•˜íŠ¸ë¹„íŠ¸ (5ë¶„ ì£¼ê¸°)
```
Client                    Server
  â”‚                         â”‚
  â”‚â”€â”€â”€heartbeat (POST)â”€â”€â”€â”€â”€>â”‚
  â”‚  {pc_id, cpu, ram...}   â”‚
  â”‚                         â”‚â”€â”€> DB: UPDATE pc_info.last_seen
  â”‚                         â”‚â”€â”€> DB: INSERT pc_status
  â”‚<â”€â”€{status: success}â”€â”€â”€â”€â”€â”‚
  â”‚                         â”‚
```

#### 3. ëª…ë ¹ í´ë§ (10ì´ˆ Long-polling)
```
Client                    Server
  â”‚                         â”‚
  â”‚â”€â”€â”€get command (GET)â”€â”€â”€â”€>â”‚
  â”‚  ?pc_id=123             â”‚
  â”‚                         â”‚â”€â”€> DB: SELECT pc_command
  â”‚         (ëŒ€ê¸° ìµœëŒ€ 10ì´ˆ)  â”‚     WHERE pc_id=123 AND status='pending'
  â”‚                         â”‚
  â”‚<â”€â”€{commands: [...]}â”€â”€â”€â”€â”€â”‚  (ëª…ë ¹ ìˆìœ¼ë©´ ì¦‰ì‹œ ì‘ë‹µ)
  â”‚                         â”‚
  â”‚â”€â”€â”€executeâ”€â”€â”€â”           â”‚
  â”‚             â”‚           â”‚
  â”‚<â”€â”€â”€â”€resultâ”€â”€â”˜           â”‚
  â”‚                         â”‚
  â”‚â”€â”€â”€report result (POST)â”€>â”‚
  â”‚  {command_id, result}   â”‚
  â”‚                         â”‚â”€â”€> DB: UPDATE pc_command
  â”‚<â”€â”€{status: success}â”€â”€â”€â”€â”€â”‚
  â”‚                         â”‚
```

#### 4. ê´€ë¦¬ì ëª…ë ¹ ì „ì†¡
```
Admin                   Server                  Client
  â”‚                       â”‚                       â”‚
  â”‚â”€â”€send command (POST)â”€>â”‚                       â”‚
  â”‚  {pc_id, type, data}  â”‚                       â”‚
  â”‚                       â”‚â”€â”€> DB: INSERT command â”‚
  â”‚<â”€{status: success}â”€â”€â”€â”€â”‚                       â”‚
  â”‚                       â”‚                       â”‚
  â”‚                       â”‚<â”€â”€â”€polling (GET)â”€â”€â”€â”€â”€â”€â”‚
  â”‚                       â”‚                       â”‚
  â”‚                       â”‚â”€â”€{commands: [...]}â”€â”€â”€>â”‚
  â”‚                       â”‚                       â”‚
  â”‚                       â”‚                       â”‚â”€â”€execute
  â”‚                       â”‚                       â”‚
  â”‚                       â”‚<â”€â”€report (POST)â”€â”€â”€â”€â”€â”€â”€â”‚
  â”‚                       â”‚                       â”‚
  â”‚                       â”‚â”€â”€> DB: UPDATE command â”‚
  â”‚                       â”‚                       â”‚
```

---

## ì»´í¬ë„ŒíŠ¸ êµ¬ì¡°

### ì„œë²„ ì»´í¬ë„ŒíŠ¸ (ë¦¬íŒ©í† ë§ í›„)

```
server/
â”œâ”€â”€ app.py                      # Flask ì•± ì´ˆê¸°í™” ë° ì‹¤í–‰
â”‚   â””â”€â”€ create_app() â†’ Flask    # Application Factory íŒ¨í„´
â”‚
â”œâ”€â”€ config.py                   # ì„¤ì • ê´€ë¦¬
â”‚   â”œâ”€â”€ Config (Base)
â”‚   â”œâ”€â”€ DevelopmentConfig
â”‚   â”œâ”€â”€ ProductionConfig
â”‚   â””â”€â”€ TestConfig
â”‚
â”œâ”€â”€ models/                     # ë°ì´í„° ëª¨ë¸ (Repository íŒ¨í„´)
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ pc.py                   # PCModel
â”‚   â”‚   â”œâ”€â”€ get_by_id()
â”‚   â”‚   â”œâ”€â”€ get_by_machine_id()
â”‚   â”‚   â”œâ”€â”€ get_all()
â”‚   â”‚   â”œâ”€â”€ register()
â”‚   â”‚   â””â”€â”€ update_status()
â”‚   â”œâ”€â”€ command.py              # CommandModel
â”‚   â”‚   â”œâ”€â”€ create()
â”‚   â”‚   â”œâ”€â”€ get_pending()
â”‚   â”‚   â”œâ”€â”€ update_result()
â”‚   â”‚   â””â”€â”€ cleanup_old()
â”‚   â””â”€â”€ admin.py                # AdminModel
â”‚       â”œâ”€â”€ authenticate()
â”‚       â”œâ”€â”€ create()
â”‚       â””â”€â”€ get_by_username()
â”‚
â”œâ”€â”€ api/                        # API ì—”ë“œí¬ì¸íŠ¸ (Flask Blueprint)
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ client.py               # í´ë¼ì´ì–¸íŠ¸ API
â”‚   â”‚   â”œâ”€â”€ /api/client/register
â”‚   â”‚   â”œâ”€â”€ /api/client/heartbeat
â”‚   â”‚   â”œâ”€â”€ /api/client/command
â”‚   â”‚   â””â”€â”€ /api/client/command/result
â”‚   â”œâ”€â”€ admin.py                # ê´€ë¦¬ì API
â”‚   â”‚   â”œâ”€â”€ /api/pcs
â”‚   â”‚   â”œâ”€â”€ /api/pc/<id>
â”‚   â”‚   â”œâ”€â”€ /api/pc/<id>/command
â”‚   â”‚   â””â”€â”€ /api/pc/<id>/shutdown
â”‚   â””â”€â”€ web.py                  # ì›¹ í˜ì´ì§€ ë¼ìš°íŠ¸
â”‚       â”œâ”€â”€ /
â”‚       â”œâ”€â”€ /login
â”‚       â”œâ”€â”€ /layout/editor
â”‚       â””â”€â”€ /pc/<id>/history
â”‚
â”œâ”€â”€ services/                   # ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ pc_service.py           # PC ê´€ë¦¬ ì„œë¹„ìŠ¤
â”‚   â”‚   â”œâ”€â”€ register_or_update()
â”‚   â”‚   â”œâ”€â”€ update_heartbeat()
â”‚   â”‚   â””â”€â”€ check_offline()
â”‚   â””â”€â”€ command_service.py      # ëª…ë ¹ ì²˜ë¦¬ ì„œë¹„ìŠ¤
â”‚       â”œâ”€â”€ create_command()
â”‚       â”œâ”€â”€ get_pending_commands()
â”‚       â””â”€â”€ process_result()
â”‚
â”œâ”€â”€ utils/                      # ìœ í‹¸ë¦¬í‹°
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ database.py             # DB í—¬í¼
â”‚   â”‚   â”œâ”€â”€ get_db()
â”‚   â”‚   â”œâ”€â”€ close_db()
â”‚   â”‚   â””â”€â”€ execute_query()
â”‚   â”œâ”€â”€ auth.py                 # ì¸ì¦
â”‚   â”‚   â”œâ”€â”€ require_admin
â”‚   â”‚   â””â”€â”€ hash_password()
â”‚   â””â”€â”€ validators.py           # ê²€ì¦
â”‚       â”œâ”€â”€ validate_not_null()
â”‚       â””â”€â”€ validate_machine_id()
â”‚
â””â”€â”€ templates/                  # Jinja2 í…œí”Œë¦¿
    â”œâ”€â”€ base.html
    â”œâ”€â”€ index.html
    â””â”€â”€ ...
```

### í´ë¼ì´ì–¸íŠ¸ ì»´í¬ë„ŒíŠ¸ (ë¦¬íŒ©í† ë§ í›„)

```
client/
â”œâ”€â”€ main.py                     # ë©”ì¸ ì—”íŠ¸ë¦¬í¬ì¸íŠ¸
â”‚   â”œâ”€â”€ setup_logging()
â”‚   â”œâ”€â”€ register_client()
â”‚   â”œâ”€â”€ heartbeat_loop()
â”‚   â””â”€â”€ command_loop()
â”‚
â”œâ”€â”€ config.py                   # ì„¤ì • ê´€ë¦¬
â”‚   â”œâ”€â”€ SERVER_URL
â”‚   â”œâ”€â”€ MACHINE_ID
â”‚   â”œâ”€â”€ HEARTBEAT_INTERVAL
â”‚   â””â”€â”€ COMMAND_POLL_INTERVAL
â”‚
â”œâ”€â”€ collector.py                # ì‹œìŠ¤í…œ ì •ë³´ ìˆ˜ì§‘
â”‚   â”œâ”€â”€ collect_static_info()   # CPU, RAM, Disk (1íšŒ)
â”‚   â””â”€â”€ collect_dynamic_info()  # CPU%, RAM%, í”„ë¡œì„¸ìŠ¤ (5ë¶„)
â”‚
â”œâ”€â”€ executor.py                 # ëª…ë ¹ ì‹¤í–‰
â”‚   â”œâ”€â”€ CommandExecutor
â”‚   â”‚   â”œâ”€â”€ shutdown()
â”‚   â”‚   â”œâ”€â”€ reboot()
â”‚   â”‚   â”œâ”€â”€ execute()
â”‚   â”‚   â”œâ”€â”€ install()
â”‚   â”‚   â”œâ”€â”€ download_file()
â”‚   â”‚   â”œâ”€â”€ create_user()
â”‚   â”‚   â”œâ”€â”€ delete_user()
â”‚   â”‚   â””â”€â”€ change_password()
â”‚
â”œâ”€â”€ service.py                  # Windows ì„œë¹„ìŠ¤
â”‚   â””â”€â”€ WCMSClientService
â”‚       â”œâ”€â”€ SvcDoRun()
â”‚       â””â”€â”€ SvcStop()
â”‚
â”œâ”€â”€ utils.py                    # ìœ í‹¸ë¦¬í‹°
â”‚   â”œâ”€â”€ retry_on_network_error()
â”‚   â”œâ”€â”€ safe_request()
â”‚   â””â”€â”€ exponential_backoff()
â”‚
â””â”€â”€ data/
    â””â”€â”€ system_processes.json   # ì‹œìŠ¤í…œ í”„ë¡œì„¸ìŠ¤ í•„í„° ëª©ë¡
```

---

## ë°ì´í„° íë¦„

### 1. PC ë“±ë¡ ë° ìƒíƒœ ì—…ë°ì´íŠ¸

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Client   â”‚
â”‚ ë¶€íŒ…     â”‚
â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
      â”‚
      â”‚ 1. collect_static_info()
      â”‚    - CPU ëª¨ë¸, RAM, Disk
      â”‚    - OS ë²„ì „, ë„¤íŠ¸ì›Œí¬ ì •ë³´
      â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ POST        â”‚
â”‚ /api/client/â”‚
â”‚ register    â”‚
â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
      â”‚
      â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Server: pc_service.py       â”‚
â”‚                             â”‚
â”‚ 1. machine_id ì¤‘ë³µ ì²´í¬     â”‚
â”‚ 2. pc_info INSERT/UPDATE    â”‚
â”‚ 3. pc_specs INSERT/UPDATE   â”‚
â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â”‚
      â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ SQLite DB   â”‚
â”‚ - pc_info   â”‚
â”‚ - pc_specs  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2. ëª…ë ¹ ì „ì†¡ ë° ì‹¤í–‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Admin    â”‚
â”‚ ì›¹ UI    â”‚
â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
      â”‚
      â”‚ í´ë¦­: "ì¢…ë£Œ" ë²„íŠ¼
      â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ POST        â”‚
â”‚ /api/pc/123/â”‚
â”‚ shutdown    â”‚
â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
      â”‚
      â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Server: command_service.py  â”‚
â”‚                             â”‚
â”‚ 1. PC ì¡´ì¬ ì—¬ë¶€ í™•ì¸        â”‚
â”‚ 2. pc_command INSERT        â”‚
â”‚    - type: shutdown         â”‚
â”‚    - status: pending        â”‚
â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â”‚
      â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ SQLite DB   â”‚
â”‚ pc_command  â”‚
â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
      â”‚
      â”‚ (í´ë¼ì´ì–¸íŠ¸ê°€ 10ì´ˆ í´ë§)
      â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ GET         â”‚
â”‚ /api/client/â”‚
â”‚ command     â”‚
â”‚ ?pc_id=123  â”‚
â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
      â”‚
      â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Server                      â”‚
â”‚ 1. ëŒ€ê¸° ì¤‘ì¸ ëª…ë ¹ ì¡°íšŒ       â”‚
â”‚ 2. status â†’ 'executing'     â”‚
â”‚ 3. ëª…ë ¹ ë°˜í™˜                â”‚
â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â”‚
      â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Client       â”‚
â”‚ executor.py  â”‚
â”‚              â”‚
â”‚ shutdown()   â”‚
â”‚ subprocess.  â”‚
â”‚ run(...)     â”‚
â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
      â”‚
      â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ POST        â”‚
â”‚ /api/client/â”‚
â”‚ command/    â”‚
â”‚ result      â”‚
â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
      â”‚
      â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Server                      â”‚
â”‚ 1. pc_command UPDATE        â”‚
â”‚    - status: completed      â”‚
â”‚    - result: "ì¢…ë£Œ ì™„ë£Œ"    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ë°ì´í„°ë² ì´ìŠ¤ ì„¤ê³„

### ERD (Entity Relationship Diagram)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     admins      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id (PK)         â”‚
â”‚ username        â”‚
â”‚ password_hash   â”‚
â”‚ email           â”‚
â”‚ is_active       â”‚
â”‚ last_login      â”‚
â”‚ created_at      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    pc_info      â”‚â†â”€â”€â”€â”€â”€â”€â”€â”€â”‚   pc_specs      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ 1     1 â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id (PK)         â”‚         â”‚ id (PK)         â”‚
â”‚ machine_id (UK) â”‚         â”‚ pc_id (FK)      â”‚
â”‚ hostname        â”‚         â”‚ cpu_model       â”‚
â”‚ mac_address     â”‚         â”‚ cpu_cores       â”‚
â”‚ room_name       â”‚         â”‚ cpu_threads     â”‚
â”‚ seat_number     â”‚         â”‚ ram_total       â”‚
â”‚ ip_address      â”‚         â”‚ disk_info (JSON)â”‚
â”‚ is_online       â”‚         â”‚ os_edition      â”‚
â”‚ last_seen       â”‚         â”‚ os_version      â”‚
â”‚ created_at      â”‚         â”‚ created_at      â”‚
â”‚ updated_at      â”‚         â”‚ updated_at      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”‚ 1
         â”‚
         â”‚ N
         â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   pc_status     â”‚         â”‚  pc_command     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤         â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id (PK)         â”‚         â”‚ id (PK)         â”‚
â”‚ pc_id (FK)      â”‚         â”‚ pc_id (FK)      â”‚
â”‚ cpu_usage       â”‚         â”‚ admin_username  â”‚
â”‚ ram_used        â”‚         â”‚ command_type    â”‚
â”‚ ram_usage_pct   â”‚         â”‚ command_data    â”‚
â”‚ disk_usage(JSON)â”‚         â”‚ priority        â”‚
â”‚ current_user    â”‚         â”‚ status          â”‚
â”‚ uptime          â”‚         â”‚ result          â”‚
â”‚ processes(JSON) â”‚         â”‚ error_message   â”‚
â”‚ created_at      â”‚         â”‚ retry_count     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚ max_retries     â”‚
         â†‘                  â”‚ timeout_seconds â”‚
         â”‚                  â”‚ created_at      â”‚
         â”‚ 1                â”‚ started_at      â”‚
         â”‚                  â”‚ completed_at    â”‚
         â”‚ N                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                           â†‘
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### í…Œì´ë¸” ì„¤ê³„ ì›ì¹™

#### 1. ì •ì /ë™ì  ë°ì´í„° ë¶„ë¦¬
- **pc_info**: ê¸°ë³¸ ì •ë³´ (ë³€ê²½ ë¹ˆë„ ë‚®ìŒ)
- **pc_specs**: í•˜ë“œì›¨ì–´ ìŠ¤í™ (ê±°ì˜ ë¶ˆë³€)
- **pc_status**: ë™ì  ìƒíƒœ (5ë¶„ë§ˆë‹¤ ê°±ì‹ )

**íš¨ê³¼:**
- ë””ìŠ¤í¬ ì‚¬ìš©ëŸ‰ 70% ê°ì†Œ
- ì¿¼ë¦¬ ì„±ëŠ¥ í–¥ìƒ
- ì¸ë±ìŠ¤ íš¨ìœ¨ ì¦ê°€

#### 2. JSON í•„ë“œ í™œìš©
- **disk_info**: `{"C:\\": {"total_gb": 237.0, "used_gb": 107.2, ...}}`
- **processes**: `["chrome.exe", "Code.exe", ...]`
- **command_data**: `{"username": "student", "password": "1234"}`

**ì´ìœ :**
- ìŠ¤í‚¤ë§ˆ ë³€ê²½ ì—†ì´ ìœ ì—°í•œ í™•ì¥
- ë³µì¡í•œ êµ¬ì¡° ì €ì¥ ìš©ì´
- SQLite JSON í•¨ìˆ˜ ì§€ì›

#### 3. ì¸ë±ìŠ¤ ì „ëµ
```sql
-- ìì£¼ ì¡°íšŒë˜ëŠ” í•„ë“œ
CREATE INDEX idx_pc_info_machine_id ON pc_info(machine_id);
CREATE INDEX idx_pc_info_room ON pc_info(room_name, is_online);

-- ì‹œê³„ì—´ ë°ì´í„°
CREATE INDEX idx_pc_status_pc_id_time ON pc_status(pc_id, created_at DESC);

-- ëª…ë ¹ í´ë§
CREATE INDEX idx_pc_command_pending ON pc_command(pc_id, status, created_at);
```

#### 4. ìë™ ì •ë¦¬ (íŠ¸ë¦¬ê±°)
```sql
-- 3ê°œì›” ì´ìƒ ëœ ìƒíƒœ ë°ì´í„° ì‚­ì œ
CREATE TRIGGER cleanup_old_status
AFTER INSERT ON pc_status
BEGIN
    DELETE FROM pc_status
    WHERE created_at < datetime('now', '-3 months');
END;
```

---

## ë³´ì•ˆ ì•„í‚¤í…ì²˜

### 1. ì¸ì¦ ë° ê¶Œí•œ

#### ê´€ë¦¬ì ì¸ì¦
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Login Form   â”‚
â”‚ (username/pw)â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ bcrypt.checkpw()         â”‚
â”‚ (í•´ì‹œ ë¹„êµ)               â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Flask Session            â”‚
â”‚ session['admin'] = True  â”‚
â”‚ (ì„œë²„ ì¸¡ ì €ì¥)            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### API ê¶Œí•œ ê²€ì‚¬
```python
@require_admin
def api_pc_shutdown(pc_id):
    # ì„¸ì…˜ì— 'admin' í‚¤ê°€ ì—†ìœ¼ë©´ 401 Unauthorized
    ...
```

### 2. í´ë¼ì´ì–¸íŠ¸ ì¸ì¦

#### Machine ID ê¸°ë°˜ ì‹ë³„
```python
# MAC ì£¼ì†Œ ê¸°ë°˜ ê³ ìœ  ID ìƒì„±
MACHINE_ID = "A1B2C3D4E5F6"  # ë„¤íŠ¸ì›Œí¬ ì¸í„°í˜ì´ìŠ¤ MAC ì£¼ì†Œ

# ì„œë²„ ë“±ë¡ ì‹œ
{
    "machine_id": "A1B2C3D4E5F6",
    "hostname": "LAB-PC-01",
    ...
}
```

**ë³´ì•ˆ ê³ ë ¤ì‚¬í•­:**
- âœ… MAC ì£¼ì†Œ ìœ„ì¡° ê°€ëŠ¥ â†’ ë‚´ë¶€ ë„¤íŠ¸ì›Œí¬ ì „ìš©
- âš ï¸ ì¶”ê°€ ì¸ì¦: API í† í° ë˜ëŠ” í´ë¼ì´ì–¸íŠ¸ ì¸ì¦ì„œ ê³ ë ¤

### 3. í†µì‹  ë³´ì•ˆ

#### í˜„ì¬ (HTTP)
```
Client â”€â”€(HTTP)â”€â”€> Server
  â””â”€ ë‚´ë¶€ ë„¤íŠ¸ì›Œí¬ ì „ìš©
  â””â”€ ë°©í™”ë²½ìœ¼ë¡œ ì™¸ë¶€ ì°¨ë‹¨
```

#### í”„ë¡œë•ì…˜ ê¶Œì¥ (HTTPS)
```
Client â”€â”€(HTTPS)â”€â”€> Server
  â””â”€ TLS 1.3
  â””â”€ ì¸ì¦ì„œ: Let's Encrypt
  â””â”€ nginx ë¦¬ë²„ìŠ¤ í”„ë¡ì‹œ
```

### 4. ëª…ë ¹ ì‹¤í–‰ ë³´ì•ˆ

#### ìœ„í—˜ ëª…ë ¹ í•„í„°ë§
```python
# executor.py
BLOCKED_COMMANDS = [
    'format',
    'del /f /s /q C:\\',
    'rm -rf /',
    ...
]

def execute(command):
    if any(blocked in command.lower() for blocked in BLOCKED_COMMANDS):
        return "âŒ ì°¨ë‹¨ëœ ëª…ë ¹ì–´ì…ë‹ˆë‹¤"
    ...
```

#### ê¶Œí•œ ì œí•œ
- í´ë¼ì´ì–¸íŠ¸ëŠ” SYSTEM ê¶Œí•œìœ¼ë¡œ ì‹¤í–‰ (Windows ì„œë¹„ìŠ¤)
- ë¯¼ê°í•œ ëª…ë ¹ì€ ê´€ë¦¬ì ìŠ¹ì¸ í•„ìš” (í–¥í›„ êµ¬í˜„)

---

## í™•ì¥ì„± ê³ ë ¤ì‚¬í•­

### 1. ìˆ˜í‰ í™•ì¥ (Scale Out)

#### í˜„ì¬ ì œì•½
- SQLiteëŠ” ë‹¨ì¼ ì„œë²„ ì „ìš©
- ì„¸ì…˜ì€ ë©”ëª¨ë¦¬ ì €ì¥

#### í™•ì¥ ë°©ì•ˆ
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Server 1 â”‚     â”‚ Server 2 â”‚     â”‚ Server N â”‚
â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
      â”‚                â”‚                â”‚
      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â†“
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚ PostgreSQL      â”‚
              â”‚ (ë˜ëŠ” MySQL)    â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚ Redis Session   â”‚
              â”‚ Store           â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ë§ˆì´ê·¸ë ˆì´ì…˜ ê²½ë¡œ:**
1. SQLite â†’ PostgreSQL (SQLAlchemy ORM)
2. ë©”ëª¨ë¦¬ ì„¸ì…˜ â†’ Redis
3. ë¡œë“œ ë°¸ëŸ°ì„œ ì¶”ê°€ (nginx)

### 2. ìˆ˜ì§ í™•ì¥ (Scale Up)

#### ì„±ëŠ¥ ìµœì í™”
- **Connection Pooling**: SQLite â†’ PostgreSQL ì „í™˜ ì‹œ
- **ìºì‹±**: Redisë¡œ ìì£¼ ì¡°íšŒë˜ëŠ” PC ì •ë³´ ìºì‹±
- **ë¹„ë™ê¸° ì²˜ë¦¬**: Flask â†’ FastAPI ì „í™˜ ê³ ë ¤

### 3. ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤ ì „í™˜

#### í˜„ì¬ (ëª¨ë†€ë¦¬ì‹)
```
Flask App
â”œâ”€â”€ Web UI
â”œâ”€â”€ Admin API
â”œâ”€â”€ Client API
â””â”€â”€ Background Worker
```

#### í–¥í›„ (ë§ˆì´í¬ë¡œì„œë¹„ìŠ¤)
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ API Gateway â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚
   â”Œâ”€â”€â”€â”´â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚       â”‚           â”‚            â”‚
   â†“       â†“           â†“            â†“
â”Œâ”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚Web â”‚  â”‚PC  â”‚  â”‚Command   â”‚  â”‚Auth    â”‚
â”‚UI  â”‚  â”‚Mgmtâ”‚  â”‚Service   â”‚  â”‚Service â”‚
â””â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜
   â”‚       â”‚           â”‚            â”‚
   â””â”€â”€â”€â”¬â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Message Queueâ”‚
â”‚ (RabbitMQ)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4. ëª¨ë‹ˆí„°ë§ ë° ë¡œê¹…

#### ì¤‘ì•™ ì§‘ì¤‘ì‹ ë¡œê¹…
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚Server  â”‚  â”‚Client 1â”‚  â”‚Client Nâ”‚
â”‚ Logs   â”‚  â”‚ Logs   â”‚  â”‚ Logs   â”‚
â””â”€â”€â”€â”¬â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”¬â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
    â”‚           â”‚            â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â†“
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ Logstash      â”‚
        â”‚ (ìˆ˜ì§‘/íŒŒì‹±)    â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                â†“
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ Elasticsearch â”‚
        â”‚ (ì €ì¥/ê²€ìƒ‰)    â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
                â†“
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ Kibana        â”‚
        â”‚ (ì‹œê°í™”)       â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### ë©”íŠ¸ë¦­ ìˆ˜ì§‘
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚Prometheusâ”‚
â”‚ Exporter â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
     â”‚
     â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚Prometheus  â”‚
â”‚ Server     â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚
     â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Grafana    â”‚
â”‚ Dashboard  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ì„±ëŠ¥ íŠ¹ì„±

### ì‘ë‹µ ì‹œê°„

| ì‘ì—… | í‰ê·  ì‘ë‹µ ì‹œê°„ | ëª©í‘œ |
|------|---------------|------|
| PC ëª©ë¡ ì¡°íšŒ | 50ms | < 100ms |
| PC ìƒì„¸ ì •ë³´ | 30ms | < 50ms |
| ëª…ë ¹ ì „ì†¡ | 20ms | < 30ms |
| í•˜íŠ¸ë¹„íŠ¸ ì²˜ë¦¬ | 40ms | < 100ms |
| ëª…ë ¹ í´ë§ | 10ì´ˆ (Long-polling) | 10ì´ˆ |

### ì²˜ë¦¬ëŸ‰

| ë©”íŠ¸ë¦­ | í˜„ì¬ ê°’ | í•œê³„ |
|--------|---------|------|
| ë™ì‹œ í´ë¼ì´ì–¸íŠ¸ | 100ëŒ€ | 500ëŒ€ (SQLite) |
| ì´ˆë‹¹ í•˜íŠ¸ë¹„íŠ¸ | 0.3 req/s | 10 req/s |
| ì´ˆë‹¹ ëª…ë ¹ ì „ì†¡ | 10 req/s | 100 req/s |
| DB í¬ê¸° (3ê°œì›”) | 650MB | 5GB |

### ë³‘ëª© ì§€ì 

1. **SQLite Write Lock**: ë™ì‹œ ì“°ê¸° ì œí•œ
   - **í•´ê²°**: WAL ëª¨ë“œ ì‚¬ìš© (í˜„ì¬ ì ìš©)
   - **í•œê³„**: ì—¬ì „íˆ ë‹¨ì¼ writer

2. **Long-polling ì—°ê²°**: í´ë¼ì´ì–¸íŠ¸ë‹¹ 1ê°œ ì—°ê²° ìœ ì§€
   - **í•´ê²°**: gunicorn worker ì¦ê°€
   - **í•œê³„**: 500ëŒ€ ì´ìƒì€ PostgreSQL + ë¹„ë™ê¸° í•„ìš”

3. **ë°±ê·¸ë¼ìš´ë“œ ì˜¤í”„ë¼ì¸ ì²´í¬**: 30ì´ˆë§ˆë‹¤ ì „ì²´ PC ìŠ¤ìº”
   - **í•´ê²°**: ì¸ë±ìŠ¤ ìµœì í™”
   - **í•œê³„**: PC ìˆ˜ ì¦ê°€ ì‹œ ë¶€í•˜ ì¦ê°€

---

## ì¥ì•  ë³µêµ¬

### 1. ì„œë²„ ë‹¤ìš´

#### ë³µêµ¬ ì ˆì°¨
```bash
# 1. ì„œë²„ ì¬ì‹œì‘
systemctl restart wcms

# 2. DB ë¬´ê²°ì„± ì²´í¬
sqlite3 db.sqlite3 "PRAGMA integrity_check;"

# 3. í´ë¼ì´ì–¸íŠ¸ ìë™ ì¬ì—°ê²°
# (í´ë¼ì´ì–¸íŠ¸ëŠ” ìë™ìœ¼ë¡œ ì¬ì‹œë„)
```

### 2. ë°ì´í„°ë² ì´ìŠ¤ ì†ìƒ

#### ë°±ì—… ë° ë³µêµ¬
```bash
# ì •ê¸° ë°±ì—… (cron)
0 2 * * * sqlite3 /path/to/db.sqlite3 ".backup /backup/wcms_$(date +\%Y\%m\%d).db"

# ë³µêµ¬
cp /backup/wcms_20251230.db db.sqlite3
```

### 3. í´ë¼ì´ì–¸íŠ¸ ì—°ê²° ëŠê¹€

#### ìë™ ë³µêµ¬ ë¡œì§
```python
# client/utils.py
@retry_on_network_error(max_retries=3, delay=5)
def safe_request(url, method='GET', **kwargs):
    """ë„¤íŠ¸ì›Œí¬ ì—ëŸ¬ ì‹œ ìë™ ì¬ì‹œë„"""
    ...
```

---

## ì°¸ê³  ìë£Œ

- [Flask Documentation](https://flask.palletsprojects.com/)
- [SQLite WAL Mode](https://www.sqlite.org/wal.html)
- [Long Polling Best Practices](https://javascript.info/long-polling)
- [Windows Services](https://docs.python.org/3/library/winsvc.html)

---

**ë¬¸ì„œ ë²„ì „**: 2.0  
**ìµœì¢… ì—…ë°ì´íŠ¸**: 2025-12-30  
**ì‘ì„±ì**: WCMS Team

