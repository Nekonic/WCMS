# 변경 이력

프로젝트의 주요 변경사항을 기록합니다.

형식: [Keep a Changelog](https://keepachangelog.com/ko/1.0.0/)  
버전 관리: [Semantic Versioning](https://semver.org/lang/ko/)

---

## [Unreleased] - 0.7.0

### 추가
- **서버 모듈화 완료** (Phase 1 - 100%)
  - 모델 레이어: `server/models/` (PC, Command, Admin)
  - API 레이어: `server/api/` (Client, Admin - Flask Blueprint)
  - 서비스 레이어: `server/services/` (PC, Command)
  - 유틸리티: `server/utils/` (Database, Auth, Validators)
  - 설정 관리: `server/config.py` (환경별 설정 분리)

- **클라이언트 개선** (Phase 2 - 60%)
  - 설정 중앙화: `client/config.py` (환경변수 지원)
  - 유틸리티: `client/utils.py` (네트워크 재시도, 안전한 요청)
  - 시스템 프로세스 JSON 외부화
  - `main.py` 리팩토링 (진행 중)

- **문서 체계화**
  - `docs/` 폴더로 개발자 문서 집중
  - API 문서 추가 (`docs/API.md`)
  - 시스템 아키텍처 문서 (`docs/ARCHITECTURE.md`)
  - 리팩토링 계획 및 진행 상황 문서

- **테스트 인프라 구축**
  - archive 버전 검증 테스트: `tests/archive/test_complete.py` (32개 테스트)
  - 리팩터링 버전 검증 테스트: `tests/server/test_complete.py` (21개 테스트)
  - 전체 45개 테스트 통과

### 변경
- 서버 아키텍처: 단일 파일 (1,270줄) → 모듈화 (13개 파일, 2,680줄)
- 설계 패턴 적용: Repository, Blueprint, Service 레이어
- 타입 힌팅 추가 (모든 새 함수)
- 문서 구조: 루트 3개 + docs/ 8개 (명확한 역할 분리)
- 프로젝트 구조 정리: archive, tests, docs, db, scripts 디렉토리 분리

### 수정
- **[중요] CommandModel 스키마 호환성 버그 수정**
  - 문제: 리팩터링 코드가 archive DB 스키마에 없는 컬럼 사용 시도
  - 해결: 런타임 스키마 감지 및 호환성 레이어 추가
  - 영향: 모든 명령 전송 API (shutdown, reboot, account 관리 등)
  - 결과: archive DB와 리팩터링 DB 모두 지원 (마이그레이션 불필요)
- 네트워크 통신 안정성 개선 (자동 재시도)
- 설정 관리 개선 (하드코딩 → 환경변수)

---

## [0.6.0] - 2025-12-04

### 추가
- **일괄 명령 전송 기능 확장**
  - 드래그 선택으로 여러 PC 동시 선택
  - 체크박스 UI로 선택된 PC 시각적 확인
  - 온라인 PC 전체 선택 기능
  - 실시간 명령 결과 모달 (2초마다 자동 새로고침)
  
- **명령 초기화 시스템**
  - 대기 중인 명령 전체 조회 API
  - 개별 PC 명령 삭제
  - 일괄 명령 삭제 (선택된 PC들)
  - 부팅 시 밀린 명령 방지 기능

- **PC 상세 정보 향상**
  - CPU 모델명 표시 (WMI 통합)
  - Windows 에디션 표시 (Home/Pro/Education 등)
  - 디스크 정보 GB 단위 통일
  - 프로세스 목록 개선 (100+ 시스템 프로세스 필터링)

### 개선
- 명령 폴링 최적화 (Long-polling 10초)
- 하트비트 주기 최적화 (5분)
- 웹 UI 자동 새로고침 (30초)
- 백그라운드 오프라인 체크 (30초 주기)
- SQLite WAL 모드 적용 (동시성 개선)

### 수정
- 정적/동적 데이터 분리로 디스크 사용량 70% 감소
- 시스템 프로세스 필터링 정확도 향상
- CPU/RAM/디스크 정보 단위 통일 (GB)
- 명령 실행 안정성 개선

---

## [0.5.6] - 2025-11-19

### 추가
- Windows 서비스로 클라이언트 배포
- GitHub Actions 자동 빌드 및 배포
- 클라이언트 자동 버전 체크 기능
- 백그라운드 오프라인 체크 (30초 주기)
- Long-polling 최적화 (10초)

### 개선
- 정적/동적 데이터 분리로 디스크 사용량 70% 감소
- 하트비트 주기 최적화 (10분 → 5분)
- 명령 폴링 주기 최적화 (30초 → 10초)

### 수정
- SQLite WAL 모드 적용으로 동시성 개선
- 프로세스 필터링 개선 (100+ 시스템 프로세스)
- CPU/RAM/디스크 정보 GB 단위로 통일

---

## [0.5.0] - 2025-11-10

### 추가
- 일괄 명령 전송 기능 (드래그 선택, 체크박스)
- Windows 계정 관리 (생성/삭제/비밀번호 변경)
- 명령 실행 결과 보고 API
- 프로세스 실행 기록 페이지

### 개선
- 좌석 배치 편집기 UI 개선
- PC 상세 정보 모달 디자인 개선

---

## [0.4.0] - 2025-10-25

### 추가
- 명령 폴링 및 실행 시스템
- 명령 큐 시스템 (pc_command 테이블)
- 명령 상태 추적 (pending/executing/completed/error)

---

## [0.3.0] - 2025-10-15

### 추가
- 좌석 배치 관리 시스템 (드래그 앤 드롭)
- 실습실 관리 페이지

### 개선
- 데이터베이스 스키마 최적화 (정적/동적 데이터 분리)

---

## [0.2.0] - 2025-10-05

### 추가
- 클라이언트 기본 기능 (시스템 정보 수집, 하트비트)
- WMI를 통한 정확한 시스템 정보 수집

---

## [0.1.0] - 2025-09-20

### 추가
- Flask 서버 기본 구조
- SQLite 데이터베이스
- 초기 문서 작성

---

## 로드맵

### v0.7.0 (예정: 2025-01-10) - 리팩토링 완료
- [x] 서버 모듈화 완료
- [x] 클라이언트 구조 개선 (진행 중)
- [ ] 단위 테스트 80% 커버리지
- [x] 타입 힌팅 추가
- [ ] 코드 품질 도구 (Black, Flake8, mypy)

### v0.8.0 (예정: 2025-01-20) - 테스트 및 안정화
- [ ] app.py 완전 리팩토링 (Blueprint 통합)
- [ ] 단위 테스트 완료
- [ ] 통합 테스트 확장
- [ ] 성능 최적화
- [ ] 보안 강화

### v1.0.0 (예정: 2025-02-01) - 프로덕션 준비
- [ ] 프로덕션 배포 가이드
- [ ] 모니터링 시스템
- [ ] HTTPS 지원
- [ ] 인증서 관리

### v1.1.0 (예정: 2025-03-01) - 기능 확장
- [ ] 파일 업로드 기능
- [ ] 스크립트 실행 기능
- [ ] 예약 명령 실행
- [ ] 모바일 반응형 UI
- [ ] API 버전 관리 (/api/v1/)

---

**참고**: [Unreleased]는 다음 릴리스에 포함될 변경사항입니다.
