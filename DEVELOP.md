# κ°λ° κ°€μ΄λ“ (DEVELOP.md)

## λΉ λ¥Έ μ‹μ‘

### ν”„λ΅μ νΈ κ°μ”
- **μ΄λ¦„**: WCMS (Woosuk Computer Management System)
- **λ©ν‘**: λ€ν•™ μ‹¤μµμ‹¤ PC 40λ€ μ›κ²© λ¨λ‹ν„°λ§ λ° μ μ–΄
- **μ£Όμ” κΈ°λ¥**: μ‹μ¤ν… μ •λ³΄ μμ§‘, μ›κ²© μΆ…λ£/μ¬μ‹μ‘, μ‹¤μµμ‹¤ κ΄€λ¦¬
- **κ°λ° κΈ°κ°„**: 2025.10.18 ~ 2025.11.15
- **μƒνƒ**: [π”¨ κ°λ° μ¤‘] (ν„μ¬ Phase: ν΄λΌμ΄μ–ΈνΈ μ‹μ¤ν… μ •λ³΄ μμ§‘)

---

## μ•„ν‚¤ν…μ² μ”μ•½

```
[Flask μ„λ²„] β† HTTP API β†’ [Windows ν΄λΌμ΄μ–ΈνΈ]
β”β”€ μ›Ή λ€μ‹λ³΄λ“ (Jinja2 + Bootstrap)
β”β”€ PC μ •λ³΄ μμ§‘/μ €μ¥ (SQLite)
β””β”€ λ…λ Ή μ „λ‹¬ μ‹μ¤ν…

[κ΄€λ¦¬μ] β†’ μ„λ²„ λ€μ‹λ³΄λ“ β†’ μ›κ²© μ μ–΄
```


---

## κΈ°μ  μ¤νƒ

| κ³„μΈµ | κΈ°μ  |
|------|------|
| μ„λ²„ | Flask, SQLite, Jinja2 |
| ν΄λΌμ΄μ–ΈνΈ | Python, psutil, wmi, requests |
| λΉλ“ | PyInstaller, GitHub Actions |
| λ°°ν¬ | Windows μ„λΉ„μ¤ |

---

## νμΌλ³„ μ—­ν• 

### μ„λ²„
| νμΌ | μ—­ν•  |
|------|------|
| `app.py` | Flask λΌμ°νΈ (PC μ΅°ν, λ΅κ·ΈμΈ, μ›κ²© μ μ–΄) |
| `migrations/schema.sql` | DB ν…μ΄λΈ” μ •μ |
| `templates/base.html` | UI ν”„λ μ„μ›ν¬ + λ¨λ‹¬ |
| `templates/index.html` | μΆμ„ λ°°μΉλ„ + PC μΉ΄λ“ |

### ν΄λΌμ΄μ–ΈνΈ
| νμΌ | μ—­ν•  |
|------|------|
| `main.py` | λ©”μΈ λ£¨ν”„ (10λ¶„λ§λ‹¤ heartbeat) |
| `collector.py` | CPU, RAM, λ””μ¤ν¬, OS μ •λ³΄ μμ§‘ |
| `api.py` | μ„λ²„ API νΈμ¶ |
| `executor.py` | μΆ…λ£/μ¬μ‹μ‘/CMD μ‹¤ν–‰ |

---

## ν„μ¬ κ°λ° μƒνƒ

### β… μ™„λ£λ κΈ°λ¥
- [x] Flask μ„λ²„ κΈ°λ³Έ κµ¬μ΅°
- [x] SQLite λ°μ΄ν„°λ² μ΄μ¤ μ¤ν‚¤λ§
- [x] μ›Ή λ€μ‹λ³΄λ“ UI (μ‚¬μ΄λ“λ°”, PC μΉ΄λ“, λ¨λ‹¬)
- [x] κ΄€λ¦¬μ λ΅κ·ΈμΈ (bcrypt)
- [x] μΆμ„ λ°°μΉλ„
- [x] PC μƒμ„Έ μ •λ³΄ λ¨λ‹¬
- [x] μ„λ²„-ν΄λΌμ΄μ–ΈνΈ API ν…μ¤νΈ μ™„λ£
- [x] μΆμ„ λ°°μΉ λ“λκ·Έ&λ“λ΅­ μ—λ””ν„°

### π”¨ μ§„ν–‰ μ¤‘
- [ ] ν΄λΌμ΄μ–ΈνΈ μ‹μ¤ν… μ •λ³΄ μμ§‘ (collector.py)
- [ ] ν΄λΌμ΄μ–ΈνΈ λ©”μΈ λ£¨ν”„ κµ¬ν„

### π“‹ ν–¥ν›„ κ³„ν
- [ ] ν΄λΌμ΄μ–ΈνΈ λ…λ Ή ν΄λ§ λ° μ‹¤ν–‰
- [ ] Windows μ„λΉ„μ¤ λ“±λ΅
- [ ] GitHub Actions μλ™ λΉλ“
- [ ] 40λ€ PC λ°°ν¬ ν…μ¤νΈ
- [ ] μλ„μ° ν΄λΌμ΄μ–ΈνΈ κ³„μ • μƒμ„±(ν•κµ­μΈ,μ¤‘κµ­μΈ,λ½κ³¨μΈ μ „μ©)
- [ ] κ³Όλ©λ³„ ν•„μ” ν”„λ΅κ·Έλ¨ μ„¤μΉ(.exe λλ” wingetμΌλ΅)

---

## λ΅μ»¬ ν…μ¤νΈ ν™κ²½ μ„¤μ •

### 1. μ„λ²„ μ‹μ‘
```bash
cd server
python app.py  # http://localhost:5050
```

### 2. ν΄λΌμ΄μ–ΈνΈ API ν†µμ‹  ν…μ¤νΈ
```bash
cd client
python test_api.py
```

### 3. λ€μ‹λ³΄λ“ ν™•μΈ(κ°λ°μ©)
- μ£Όμ†: http://localhost:5050
- λ΅κ·ΈμΈ: admin / admin

---

## μ£Όμ” API μ—”λ“ν¬μΈνΈ

### ν΄λΌμ΄μ–ΈνΈ β†’ μ„λ²„
| Method | Endpoint | μ©λ„              |
|--------|----------|-----------------|
| POST | `/api/client/register` | μµμ΄ λ“±λ΅           |
| POST | `/api/client/heartbeat` | 10λ¶„λ§λ‹¤ μƒνƒ μ „μ†΅     |
| GET | `/api/client/command?machine_id=...` | λ…λ Ή ν™•μΈ (5μ΄λ§λ‹¤ ν΄λ§) |
| POST | `/api/client/command/result` | λ…λ Ή μ‹¤ν–‰ κ²°κ³Ό μ „μ†΅     |

### μ›Ή β†’ μ„λ²„
| Method | Endpoint | μ©λ„ |
|--------|----------|------|
| GET | `/` | PC λ©λ΅ μ΅°ν |
| GET | `/api/pc/<id>` | PC μƒμ„Έ μ •λ³΄ |
| POST | `/api/pc/<id>/shutdown` | μ›κ²© μΆ…λ£ |
| POST | `/api/pc/<id>/reboot` | μ›κ²© μ¬μ‹μ‘ |

---

## λ°μ΄ν„°λ² μ΄μ¤ κµ¬μ΅°

### pc_info (κΈ°λ³Έ μ •λ³΄)
```
id, machine_id, room_name, seat_number, hostname, 
is_online, ip_address, mac_address, last_seen
```
### pc_status (μƒνƒ λ΅κ·Έ)
```
id, pc_id, cpu_model, cpu_usage, ram_total, ram_used, 
disk_info, os_edition, os_version, ...
```
### admins (κ΄€λ¦¬μ)
```
id, username, password_hash
```
---

## μ£Όμμ‚¬ν•­

1. **μ„λ²„ URL**: client μ½”λ“μ SERVER_URLμ„ λ΅μ»¬/λ°°ν¬ ν™κ²½μ— λ§κ² μμ • ν•„μ”
2. **κΈ°κΈ° ID**: κ° PCλ§λ‹¤ κ³ μ ν• machine_id ν•„μ” (MAC μ£Όμ† κΈ°λ°)
3. **κ¶ν• κ΄€λ¦¬**: κ΄€λ¦¬μ κ¶ν• ν•„μ”ν• μ‘μ—… (μ„λΉ„μ¤ λ“±λ΅, μΆ…λ£ λ“±)

---

## λΉ λ¥Έ μ°Έμ΅° (Cheat Sheet)

### ν„μ¬ μ§„ν–‰ μ¤‘μΈ μ‘μ—…
- Phase: ν΄λΌμ΄μ–ΈνΈ κ°λ°
- λ©ν‘: μ‹¤μ  μ‹μ¤ν… μ •λ³΄ μμ§‘ λ° μλ™ μ „μ†΅
- μμƒ μ™„λ£: 2025.11.15

### λ‹¤μ μ‘μ—…
1. collector.py μ™„μ„± (λ¨λ“  μ‹μ¤ν… μ •λ³΄ μμ§‘)
2. main.py λ©”μΈ λ£¨ν”„ κµ¬ν„
3. ν΄λΌμ΄μ–ΈνΈ ν…μ¤νΈ
