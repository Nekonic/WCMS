# WCMS ν…μ¤νΈ κ°€μ΄λ“

## π“‹ κ°μ”

WCMS ν”„λ΅μ νΈμ λ¨λ“  κΈ°λ¥μ„ κ²€μ¦ν•κΈ° μ„ν• 3κ°€μ§€ ν…μ¤νΈ μ¤ν¬λ¦½νΈλ¥Ό μ κ³µν•©λ‹λ‹¤.

---

## π§ ν…μ¤νΈ μΆ…λ¥

### 1. μ„λ²„ API ν…μ¤νΈ (`server/test_web_access.py`)

**λ©μ **: μ„λ²„μ λ¨λ“  API μ—”λ“ν¬μΈνΈκ°€ μ •μƒ μ‘λ™ν•λ”μ§€ ν™•μΈ

**ν…μ¤νΈ ν•­λ©**:
- β… λ€μ‹λ³΄λ“ μ ‘κ·Ό (`GET /`)
- β… κ΄€λ¦¬μ λ΅κ·ΈμΈ (`POST /login`)
- β… PC λ©λ΅ μ΅°ν (`GET /api/pcs`)
- β… PC μƒμ„Έ μ •λ³΄ (`GET /api/pc/{id}`)
- β… ν”„λ΅μ„Έμ¤ κΈ°λ΅ (`GET /api/pc/{id}/history`)
- β… λ…λ Ή μ „μ†΅ (`POST /api/pc/{id}/command`)
- β… μΆμ„ λ°°μΉ (`GET /api/layout/map/{room}`)
- β… ν΄λΌμ΄μ–ΈνΈ λ“±λ΅ (`POST /api/client/register`)
- β… ν•νΈλΉ„νΈ (`POST /api/client/heartbeat`)
- β… λ…λ Ή ν΄λ§ (`GET /api/client/command`)

**μ‹¤ν–‰ λ°©λ²•**:
```bash
# 1. μ„λ²„ μ‹μ‘
cd server
python app.py

# 2. μƒ ν„°λ―Έλ„μ—μ„ ν…μ¤νΈ μ‹¤ν–‰
cd server
python test_web_access.py
```

**μμƒ κ²°κ³Ό**:
```
======================================================================
WCMS API ν†µν•© ν…μ¤νΈ
======================================================================
β“ λ€μ‹λ³΄λ“ μ ‘κ·Ό μ„±κ³µ
β“ λ΅κ·ΈμΈ μ„±κ³µ
β“ PC λ©λ΅ μ΅°ν μ„±κ³µ
...
======================================================================
μ „μ²΄: 5/5 ν…μ¤νΈ μ„±κ³µ
======================================================================
λ¨λ“  ν…μ¤νΈκ°€ μ„±κ³µν–μµλ‹λ‹¤! π‰
```

---

### 2. ν΄λΌμ΄μ–ΈνΈ κΈ°λ¥ ν…μ¤νΈ (`client/test_client.py`)

**λ©μ **: ν΄λΌμ΄μ–ΈνΈμ μ •λ³΄ μμ§‘ λ° λ…λ Ή μ‹¤ν–‰ κΈ°λ¥ ν™•μΈ

**ν…μ¤νΈ ν•­λ©**:
- β… μ •μ  μ‹μ¤ν… μ •λ³΄ μμ§‘ (CPU, RAM, λ””μ¤ν¬, OS)
- β… λ™μ  μ‹μ¤ν… μ •λ³΄ μμ§‘ (μ‚¬μ©λ¥ , ν”„λ΅μ„Έμ¤)
- β… μ‹¤ν–‰ μ¤‘μΈ ν”„λ΅μ„Έμ¤ λ©λ΅
- β… μ•μ „ν• λ…λ Ή μ‹¤ν–‰ (echo, hostname λ“±)
- β… λ…λ Ή νλΌλ―Έν„° κ²€μ¦
- β… μ „μ²΄ μ›ν¬ν”λ΅μ° μ‹λ®¬λ μ΄μ…

**μ‹¤ν–‰ λ°©λ²•**:
```bash
cd client
python test_client.py
```

**μμƒ κ²°κ³Ό**:
```
======================================================================
WCMS ν΄λΌμ΄μ–ΈνΈ κΈ°λ¥ ν…μ¤νΈ
======================================================================
β“ PASS - static_info
β“ PASS - dynamic_info
β“ PASS - processes
β“ PASS - safe_commands
β“ PASS - validation
β“ PASS - workflow
======================================================================
μ „μ²΄: 6/6 ν…μ¤νΈ μ„±κ³µ
======================================================================
λ¨λ“  ν΄λΌμ΄μ–ΈνΈ κΈ°λ¥μ΄ μ •μƒ μ‘λ™ν•©λ‹λ‹¤! π‰
```

---

### 3. ν†µν•© ν…μ¤νΈ (`test_integration.py`)

**λ©μ **: μ„λ²„-ν΄λΌμ΄μ–ΈνΈ μ „μ²΄ ν†µμ‹  νλ¦„ κ²€μ¦

**ν…μ¤νΈ μ‹λ‚λ¦¬μ¤**:
1. **ν΄λΌμ΄μ–ΈνΈ λ“±λ΅**: μ‹¤μ  μ‹μ¤ν… μ •λ³΄λ¥Ό μμ§‘ν•μ—¬ μ„λ²„μ— λ“±λ΅
2. **ν•νΈλΉ„νΈ μ „μ†΅**: λ™μ  μ •λ³΄λ¥Ό μ„λ²„λ΅ μ „μ†΅
3. **PC λ©λ΅ ν™•μΈ**: λ“±λ΅λ PCκ°€ λ©λ΅μ— ν‘μ‹λλ”μ§€ ν™•μΈ
4. **λ…λ Ή μ „μ†΅**: κ΄€λ¦¬μκ°€ PCμ— λ…λ Ή μ „μ†΅
5. **λ…λ Ή ν΄λ§ λ° μ‹¤ν–‰**: ν΄λΌμ΄μ–ΈνΈκ°€ λ…λ Ήμ„ λ°›μ•„ μ‹¤ν–‰
6. **λ°μ΄ν„° κ²€μ¦**: PC μƒμ„Έ μ •λ³΄κ°€ μ¬λ°”λ¥΄κ² μ €μ¥λμ—λ”μ§€ ν™•μΈ

**μ‹¤ν–‰ λ°©λ²•**:
```bash
# 1. μ„λ²„ μ‹μ‘
cd server
python app.py

# 2. μƒ ν„°λ―Έλ„μ—μ„ ν†µν•© ν…μ¤νΈ μ‹¤ν–‰
python test_integration.py
```

**μμƒ κ²°κ³Ό**:
```
================================================================================
WCMS ν†µν•© ν…μ¤νΈ
μ„λ²„-ν΄λΌμ΄μ–ΈνΈ μ „μ²΄ ν†µμ‹  νλ¦„ κ²€μ¦
================================================================================
[Step 1] ν΄λΌμ΄μ–ΈνΈ λ“±λ΅ ν…μ¤νΈ
β“ ν΄λΌμ΄μ–ΈνΈ λ“±λ΅ μ„±κ³µ

[Step 2] ν•νΈλΉ„νΈ μ „μ†΅ ν…μ¤νΈ
β“ ν•νΈλΉ„νΈ μ „μ†΅ μ„±κ³µ
β„Ή CPU: 45.5%, RAM: 8192MB

[Step 3] PC λ©λ΅ ν™•μΈ
β“ PC λ°κ²¬: HOSTNAME
...
================================================================================
μ „μ²΄: 6/6 μ‹λ‚λ¦¬μ¤ μ„±κ³µ
================================================================================
β… λ¨λ“  ν†µν•© ν…μ¤νΈκ°€ μ„±κ³µν–μµλ‹λ‹¤!
WCMS μ‹μ¤ν…μ΄ μ •μƒμ μΌλ΅ μ‘λ™ν•©λ‹λ‹¤. π‰
```

---

### 4. λ…λ Ή μ‹¤ν–‰ ν…μ¤νΈ (`test_commands.py`)

**λ©μ **: CMD, winget, νμΌ λ‹¤μ΄λ΅λ“ κΈ°λ¥ κ²€μ¦

**ν…μ¤νΈ ν•­λ©**:
- β… CMD λ…λ Ήμ–΄ μ‹¤ν–‰ (echo, dir, hostname λ“±)
- β… winget ν”„λ΅κ·Έλ¨ μ„¤μΉ
- β… νμΌ λ‹¤μ΄λ΅λ“
- β… ν†µν•© μ‹λ‚λ¦¬μ¤ (μ‹μ¤ν… μ •λ³΄ μμ§‘ β†’ νμΌ μ €μ¥)

**μ‹¤ν–‰ λ°©λ²•**:
```bash
python test_commands.py
```

**μμƒ κ²°κ³Ό**:
```
======================================================================
WCMS λ…λ Ή μ‹¤ν–‰ κΈ°λ¥ ν…μ¤νΈ
======================================================================
β“ PASS - cmd_commands    (CMD λ…λ Ή μ‹¤ν–‰)
β“ PASS - winget_install  (winget μ„¤μΉ)
β“ PASS - file_download   (νμΌ λ‹¤μ΄λ΅λ“)
β“ PASS - integration     (ν†µν•© μ‹λ‚λ¦¬μ¤)
======================================================================
μ „μ²΄: 4/4 ν…μ¤νΈ μ„±κ³µ
======================================================================
```

**μ£Όμμ‚¬ν•­**:
- wingetμ€ Windowsμ—μ„λ§ μ‘λ™ν•©λ‹λ‹¤
- macOS/Linuxμ—μ„λ” μΌλ¶€ ν…μ¤νΈκ°€ μ‹¤ν¨ν•  μ μμµλ‹λ‹¤

---

### 5. μ›Ή μΈν„°νμ΄μ¤ ν…μ¤νΈ

**λ…λ Ή ν…μ¤νΈ νμ΄μ§€**: `http://127.0.0.1:5050/command/test`

**κΈ°λ¥**:
1. **PC μ„ νƒ**: μ¨λΌμΈ μƒνƒμ PCλ¥Ό μ„ νƒ
2. **CMD μ‹¤ν–‰**: μ‹¤μ‹κ°„ λ…λ Ήμ–΄ μ‹¤ν–‰
3. **winget μ„¤μΉ**: ν”„λ΅κ·Έλ¨ μ›κ²© μ„¤μΉ
4. **νμΌ λ‹¤μ΄λ΅λ“**: URLμ—μ„ νμΌ λ‹¤μ΄λ΅λ“

**μ‚¬μ© λ°©λ²•**:
1. κ΄€λ¦¬μλ΅ λ΅κ·ΈμΈ
2. μΆμΈ΅ λ©”λ‰΄μ—μ„ "π§ λ…λ Ή ν…μ¤νΈ" ν΄λ¦­
3. λ€μƒ PC μ„ νƒ
4. λ…λ Ή μ ν• μ„ νƒ (CMD/winget/λ‹¤μ΄λ΅λ“)
5. νλΌλ―Έν„° μ…λ ¥ λλ” λΉ λ¥Έ λ…λ Ή λ²„νΌ ν΄λ¦­
6. "λ…λ Ή μ „μ†΅" λ²„νΌ ν΄λ¦­

**ν…μ¤νΈ μμ‹**:
```
CMD μ‹¤ν–‰: hostname
κ²°κ³Ό: PC-LAB-01

winget μ„¤μΉ: Notepad++.Notepad++
κ²°κ³Ό: β… μ„¤μΉ μ™„λ£

νμΌ λ‹¤μ΄λ΅λ“:
URL: https://www.google.com/robots.txt
κ²½λ΅: C:\temp\robots.txt
κ²°κ³Ό: β… λ‹¤μ΄λ΅λ“ μ™„λ£ (7,322 bytes)
```

---

## π€ λΉ λ¥Έ μ‹μ‘

λ¨λ“  ν…μ¤νΈλ¥Ό ν• λ²μ— μ‹¤ν–‰ν•λ ¤λ©΄:

```bash
# 1. μ„λ²„ μ‹μ‘
cd server
python app.py &

# 2. μ„λ²„ API ν…μ¤νΈ
python test_web_access.py

# 3. μƒ ν„°λ―Έλ„μ—μ„ ν΄λΌμ΄μ–ΈνΈ ν…μ¤νΈ
cd ../client
python test_client.py

# 4. ν†µν•© ν…μ¤νΈ
cd ..
python test_integration.py
```

---

## π“ ν…μ¤νΈ κ²°κ³Ό ν•΄μ„

### β… μ„±κ³µ (PASS)
- λ¨λ“  κΈ°λ¥μ΄ μ •μƒ μ‘λ™
- λ°°ν¬ κ°€λ¥ν• μƒνƒ

### β οΈ κ²½κ³  (WARNING)
- κΈ°λ¥μ€ μ‘λ™ν•μ§€λ§ μ£Όμ ν•„μ”
- μ: "μ΄λ―Έ λ“±λ΅λ PC" (μ •μƒμ μΈ μƒν™©)

### β μ‹¤ν¨ (FAIL)
- κΈ°λ¥μ΄ μ‘λ™ν•μ§€ μ•μ
- μ½”λ“ μμ • λλ” ν™κ²½ μ„¤μ • ν•„μ”

---

## π”§ λ¬Έμ  ν•΄κ²°

### "μ„λ²„ μ—°κ²° μ‹¤ν¨" μ¤λ¥
```bash
# μ„λ²„κ°€ μ‹¤ν–‰ μ¤‘μΈμ§€ ν™•μΈ
curl http://127.0.0.1:5050/

# ν¬νΈκ°€ μ‚¬μ© μ¤‘μΈμ§€ ν™•μΈ
lsof -i :5050

# μ„λ²„ μ¬μ‹μ‘
cd server
python app.py
```

### "λ°μ΄ν„°λ² μ΄μ¤ μ¤λ¥"
```bash
# λ°μ΄ν„°λ² μ΄μ¤ μ΄κΈ°ν™”
cd server
./init_db.sh
```

### "λ¨λ“μ„ μ°Ύμ„ μ μ—†μ" μ¤λ¥
```bash
# μ„λ²„ μμ΅΄μ„± μ„¤μΉ
cd server
pip install -r requirements.txt

# ν΄λΌμ΄μ–ΈνΈ μμ΅΄μ„± μ„¤μΉ
cd ../client
pip install -r requirements.txt
```

---

## π“ ν…μ¤νΈ μ»¤μ¤ν„°λ§μ΄μ§•

### μ„λ²„ URL λ³€κ²½
```python
# test_web_access.py λλ” test_integration.py
BASE_URL = "http://your-server-ip:5050"
```

### κ΄€λ¦¬μ κ³„μ • λ³€κ²½
```python
# test_web_access.py
data={"username": "your_admin", "password": "your_password"}
```

### νƒ€μ„μ•„μ›ƒ μ΅°μ •
```python
# λ¨λ“  ν…μ¤νΈ νμΌ
timeout=10  # μ΄ λ‹¨μ„
```

---

## π“ CI/CD ν†µν•©

GitHub Actions μμ‹:

```yaml
name: WCMS Tests

on: [push, pull_request]

jobs:
  test:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
      
      - name: Set up Python
        uses: actions/setup-python@v2
        with:
          python-version: '3.9'
      
      - name: Install dependencies
        run: |
          pip install -r server/requirements.txt
          pip install -r client/requirements.txt
      
      - name: Initialize database
        run: cd server && ./init_db.sh
      
      - name: Start server
        run: cd server && python app.py &
      
      - name: Wait for server
        run: sleep 5
      
      - name: Run server tests
        run: cd server && python test_web_access.py
      
      - name: Run client tests
        run: cd client && python test_client.py
      
      - name: Run integration tests
        run: python test_integration.py
```

---

## π― λ‹¤μ λ‹¨κ³„

ν…μ¤νΈκ°€ λ¨λ‘ ν†µκ³Όν•λ©΄:

1. **κ°λ° ν™κ²½μ—μ„ μ‹¤μ  ν΄λΌμ΄μ–ΈνΈ μ‹¤ν–‰**
   ```bash
   cd client
   python main.py
   ```

2. **μ›Ή λ€μ‹λ³΄λ“ μ ‘μ†**
   ```
   http://127.0.0.1:5050
   ```

3. **Windows ν΄λΌμ΄μ–ΈνΈ λΉλ“**
   ```bash
   cd client
   pyinstaller build.spec
   ```

4. **ν”„λ΅λ•μ… λ°°ν¬**
   - μ„λ²„: HTTPS μ„¤μ •, λ°©ν™”λ²½ κµ¬μ„±
   - ν΄λΌμ΄μ–ΈνΈ: Windows μ„λΉ„μ¤ λ“±λ΅

---

## π“ μ¶”κ°€ λ¦¬μ†μ¤

- [API λ¬Έμ„](../API.md)
- [κ°λ° κ°€μ΄λ“](../DEVELOP.md)
- [ν”„λ΅μ νΈ μƒνƒ](../STATUS.md)

---

**λ§μ§€λ§‰ μ—…λ°μ΄νΈ**: 2025-11-17

