# AI μ»¨ν…μ¤νΈ: WCMS

> μ‹¤μµμ‹¤ PC μ›κ²© κ΄€λ¦¬ μ‹μ¤ν…

---

## π― ν•µμ‹¬ κ°λ…

```
ν΄λΌμ΄μ–ΈνΈ (Windows Service) β†β†’ μ„λ²„ (Flask) β†β†’ μ›Ή UI
```

**ν†µμ‹  νλ¦„ (v0.8.5):**
1. λ“±λ΅ (PIN μΈμ¦ ν•„μ) β†’ 2. μ „μ²΄ ν•νΈλΉ„νΈ (5λ¶„) β†’ 3. λ…λ Ή ν΄λ§ + κ²½λ‰ ν•νΈλΉ„νΈ (2μ΄) β†’ 4. μΆ…λ£ μ‹ νΈ

> **v0.8.5 μ£Όμ” λ³€κ²½ μ™„λ£**: β… Chocolatey μ§€μ›, β΅ μ„λΉ„μ¤ μ„¤μΉ μ•μ •ν™”, π¨ UI κ°μ„   
> μμ„Έν• λ‚΄μ©: [docs/CHANGELOG.md](docs/CHANGELOG.md#085---2026-02-11)

---

## π“‚ λ””λ ‰ν† λ¦¬ κµ¬μ΅°

```
server/
β”β”€β”€ app.py              # Flask μ•± (cachelib μ„Έμ…)
β”β”€β”€ api/                # REST API
β”‚   β”β”€β”€ client.py       # ν΄λΌμ΄μ–ΈνΈ API (PIN κ²€μ¦, ν•νΈλΉ„νΈ ν†µν•©)
β”‚   β”β”€β”€ admin.py        # κ΄€λ¦¬μ API (ν† ν° κ΄€λ¦¬, ν”„λ΅μ„Έμ¤ λ©λ΅)
β”‚   β””β”€β”€ install.py      # μ„¤μΉ μ¤ν¬λ¦½νΈ (sc create μ‚¬μ©)
β”β”€β”€ models/             # DB μ ‘κ·Ό
β”‚   β”β”€β”€ registration.py # λ“±λ΅ ν† ν° λ¨λΈ
β”‚   β”β”€β”€ pc.py           # PC λ¨λΈ (update_light_heartbeat)
β”‚   β””β”€β”€ command.py      # λ…λ Ή λ¨λΈ
β”β”€β”€ services/           # λΉ„μ¦λ‹μ¤ λ΅μ§
β””β”€β”€ utils/              # κ³µν†µ ν•¨μ

client/
β”β”€β”€ main.py             # λ©”μΈ λ΅μ§ (PIN μΈμ¦, registered.flag)
β”β”€β”€ service.py          # Windows μ„λΉ„μ¤ (μΈμ μ²λ¦¬ κ°μ„ )
β”β”€β”€ collector.py        # μ‹μ¤ν… μ •λ³΄ μμ§‘ (κ³ μ • λ””μ¤ν¬λ§)
β”β”€β”€ executor.py         # λ…λ Ή μ‹¤ν–‰ (Chocolatey, PowerShell)
β””β”€β”€ config.py           # μ„¤μ • (0.0.0-dev)

tests/
β”β”€β”€ server/             # μ„λ²„ ν…μ¤νΈ
β””β”€β”€ client/             # ν΄λΌμ΄μ–ΈνΈ ν…μ¤νΈ (pytest μ¤νƒ€μΌ)
```

---

## β οΈ μμ£Ό ν•λ” μ‹¤μ

### 0. v0.8.0+ λ“±λ΅ μ‹ PIN ν•„μ!
```bash
# install.cmd μ‹¤ν–‰ μ‹ 6μλ¦¬ PIN μ…λ ¥
# κ΄€λ¦¬μκ°€ μ›Ή UIμ—μ„ μƒμ„±: /registration-tokens
```

### 1. μ„λΉ„μ¤ μ„¤μΉ λ¬Έμ 
- `install.cmd`λ” `sc create`λ¥Ό μ‚¬μ©ν•μ—¬ μ„λΉ„μ¤λ¥Ό μ§μ ‘ λ“±λ΅ν•©λ‹λ‹¤.
- `pywin32`μ `install` λ…λ Ήμ€ μ‚¬μ©ν•μ§€ μ•μµλ‹λ‹¤ (κ²½λ΅/λ©μ¶¤ λ¬Έμ ).
- μ„λΉ„μ¤λ” `delayed-auto`λ΅ μ‹μ‘λ©λ‹λ‹¤.

### 2. ν”„λ΅κ·Έλ¨ μ„¤μΉ (Chocolatey)
- `winget` λ€μ‹  `chocolatey`λ¥Ό μ‚¬μ©ν•©λ‹λ‹¤.
- μ„λΉ„μ¤ κ³„μ •(`LocalSystem`)μ—μ„λ„ μ•μ •μ μΌλ΅ λ™μ‘ν•©λ‹λ‹¤.

### 3. κ΄€λ¦¬μ λΉ„λ°€λ²νΈ
- `admin` / `admin`

---

## π”§ λΉ λ¥Έ μ°Έμ΅°

### μ„λ²„ μ‹μ‘
```bash
python manage.py run
```

### ν΄λΌμ΄μ–ΈνΈ λΉλ“
```bash
python manage.py build
```

### ν…μ¤νΈ μ‹¤ν–‰
```bash
# μ „μ²΄ ν…μ¤νΈ
python manage.py test

# ν΄λΌμ΄μ–ΈνΈ ν…μ¤νΈ
pytest tests/client/ -v
```

---

## π“ ν•µμ‹¬ μ μ•½μ‚¬ν•­

- **SQLite**: λ™μ‹ μ“°κΈ° μ ν• (WAL λ¨λ“ μ‚¬μ©)
- **Windows μ „μ© ν΄λΌμ΄μ–ΈνΈ**: pywin32, WMI ν•„μ”
- **Chocolatey**: ν”„λ΅κ·Έλ¨ μ„¤μΉ μ‹ ν•„μ (μλ™ μ„¤μΉλ¨)

---

## π€ μƒ μ„Έμ… μ‹μ‘

1. `AI_CONTEXT.md` μ½κΈ° (μ΄ νμΌ)
2. `python manage.py run`
3. http://localhost:5050 μ ‘μ†
4. ν•„μ”ν• λ¬Έμ„λ§ μ°Έκ³  (API.md, ARCHITECTURE.md)

---

**λ¬Έμ„ κ·μΉ™:**
- μ²΄ν¬λ°•μ¤: `- [x]` / `- [ ]` (μ΄λ¨ν‹°μ½ κΈμ§€)
- νƒ€μ… νν… ν•„μ
- μ—λ¬ ν•Έλ“¤λ§ ν•„μ
